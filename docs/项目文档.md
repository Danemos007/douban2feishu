# 豆瓣飞书同步助手 - 项目规划纪要 (v0.1)

---

## 1. 项目目标 (Why)
* **要解决的核心问题：** 解决豆瓣原生数据管理功能僵化、孤立的问题，无法满足用户进行个性化数据分析、跨平台知识联动和高级筛选决策的需求。
* **目标用户：** 同时使用豆瓣和飞书，并对个人书影音数据有深度归档、管理和复盘需求的知识工作者或效率爱好者。
* **核心价值：** 将用户的个人书影音数据从豆瓣孤岛中解放出来，迁移至灵活、可集成的飞书多维表格中，从而释放其在个性化年度总结、知识网络构建和智能决策方面的全部潜力。

---

## 2. 核心需求 (What)
* **核心功能模块：**
    * **用户认证:** 允许用户通过提供凭证（Cookie）来授权工具访问其个人豆瓣数据。
    * **同步配置:** 用户可以配置飞书凭证和数据表映射关系。
    * **数据同步引擎:** 工具后台能执行手动或自动的同步任务，拉取豆瓣数据并写入飞书。
    * **数据管理:** 实现对飞书多维表格中数据的增、删、改、查，确保与豆瓣数据保持一致。
    * **同步状态追溯:** 提供一个历史记录页面，展示历次同步任务的状态、耗时和结果，确保用户对同步情况完全知情。
* **关键体验要求：** 数据同步的稳定性和可靠性是最高优先级。产品形态为能自适应电脑和手机屏幕的Web应用。

---

## 3. 可行性与技术选型 (If & How)
* **主要技术挑战：**
    * **豆瓣反爬虫策略:** 这是最大的技术风险，需要通过模拟请求头、控制请求速率、使用随机延迟等手段进行规避。
    * **长耗时任务处理:** 数据同步对比逻辑复杂，耗时较长，后端架构需能稳定处理长任务。
* **初步技术方案：**
    * **前端:** 响应式Web页面，兼容PC和移动端浏览器。
    * **后端:** 一个可独立部署的后端服务，负责处理API请求和执行同步任务（具体技术栈如Node.js/Python待定）。
    * **数据抓取:** 不直接爬取HTML，而是优先使用豆瓣的移动端API获取结构化JSON数据。
* **决策理由：** 该方案能保证跨平台使用的灵活性和轻量化，并通过借鉴现有成功项目的策略来最大化同步的稳定性。

---

## 4. MVP 版本规划 (MVP)
* **MVP核心目标：** 验证核心的数据同步流程（豆瓣 -> 飞书）是否稳定、可靠，并对用户有实际价值。
* **MVP包含功能：**
    * 【登录】引导用户**手动填入Cookie**完成登录。
    * 【配置】支持飞书凭证和数据表的基础配置。
    * 【同步】提供“手动同步”按钮和“自动同步频率”设置。
    * 【写入】将抓取到的数据以**基础文本形式**写入飞书，实现增删查改。
    * 【状态显示】提供一个基础的同步历史页面，可查看每次任务的触发时间、状态、耗时和同步条数。
* **后续迭代方向：**
    * **【架构升级】** 引入独立的**用户账户体系**，实现配置的跨设备同步。
    * **【体验优化】** 将登录方式升级为更便捷的**弹窗式登录**。
    * **【高级写入】** 增加**封面图作为附件上传**和**智能适配飞书字段类型**的功能。
    * **【实时通知】** 增加**飞书机器人通知**功能，实时反馈同步结果。
    * **【增加用户问卷】** 增加用户问卷入口，调研用户痛点

---

## 5. 附录：项目思维导图

```mermaid
mindmap
  root((豆瓣飞书同步助手))
    <b>1. 项目目标 (Why)</b>
      核心问题: 豆瓣数据管理僵化、孤立
      目标用户: 豆瓣+飞书效率爱好者
      核心价值: 释放个人数据潜力
    <b>2. 核心需求 (What)</b>
      功能模块
        用户认证
        同步配置
        数据同步引擎
        数据管理
        同步状态追溯
      关键体验
        稳定可靠
        响应式Web应用
    <b>3. 可行性与技术 (If & How)</b>
      主要挑战
        反爬虫
        长耗时任务
      技术方案
        响应式前端
        独立后端服务
        调用豆瓣API
    <b>4. 版本规划 (MVP & Iteration)</b>
      <b>MVP v0.1</b>
        核心目标: 验证核心同步流程
        功能
          手动Cookie登录
          基础配置
          手动/自动同步
          基础文本写入
          状态历史显示
      <b>后续迭代</b>
        用户账户体系
        弹窗式登录
        高级写入(附件/字段适配)
        机器人通知
        增加用户问卷
